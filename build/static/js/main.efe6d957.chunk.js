(this["webpackJsonptick-it-client"]=this["webpackJsonptick-it-client"]||[]).push([[0],{39:function(e,a,t){e.exports=t(59)},45:function(e,a,t){},59:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(17),s=t.n(l),c=(t(44),t(45),t(24)),m=t(6),o=t(60),i=t(61),u=t(62),E=function(e){return r.a.createElement("div",null,r.a.createElement(o.a,{color:"dark",dark:!0,expand:"md"},r.a.createElement(i.a,null,r.a.createElement(u.a,{href:"/"},"Tick-it"))))},d=t(63),h=t(64),g=t(65),p=t(66),b=t(67),f=t(68),w=t(69),k=t(70),v=t(25);var y=function(){return r.a.createElement("div",null,r.a.createElement(d.a,{className:"text-white"},r.a.createElement(i.a,null,r.a.createElement("h1",{className:"display-3"},"Welcome to Tick-it",r.a.createElement(v.a,null)),r.a.createElement("p",{className:"lead"},"Much more than ",r.a.createElement("span",{className:"text-warning"},"turn it off & on again")),r.a.createElement(h.a,{href:"/login",color:"warning"},"Login"),r.a.createElement(h.a,{href:"/register",color:"secondary"},"Register"))),r.a.createElement(i.a,null,r.a.createElement(g.a,{className:"text-center text-white"},r.a.createElement(p.a,null,r.a.createElement("p",{className:"text-warning featureIcon"},r.a.createElement(v.c,null)),r.a.createElement("h2",null,"Quick")),r.a.createElement(p.a,null,r.a.createElement("p",{className:"text-warning featureIcon"},r.a.createElement(v.d,null)),r.a.createElement("h2",null,"Safe")),r.a.createElement(p.a,null,r.a.createElement("p",{className:"text-warning featureIcon"},r.a.createElement(v.b,null)),r.a.createElement("h2",null,"Reliable"))),r.a.createElement(g.a,{className:"my-5"},r.a.createElement(p.a,{md:"3"},r.a.createElement("img",{className:"img-thumbnail border border-warning",src:"/hardware.jpg",alt:"feature 1"})),r.a.createElement(p.a,{md:"9"},r.a.createElement(b.a,{body:!0,inverse:!0,className:"bg-transparent border border-dark"},r.a.createElement(f.a,null,r.a.createElement(w.a,null,r.a.createElement("h3",{className:"text-warning"},"Hardware Support")),r.a.createElement(k.a,null,"Screen isn't turning on? Mouse not clicking? We can help fix any hardware related issues"))))),r.a.createElement(g.a,{className:"my-5"},r.a.createElement(p.a,{md:"9"},r.a.createElement(b.a,{body:!0,inverse:!0,className:"bg-transparent border border-dark"},r.a.createElement(f.a,null,r.a.createElement(w.a,null,r.a.createElement("h3",{className:"text-warning"},"Software Support")),r.a.createElement(k.a,null,"Programs not starting? Can't login? We support all enterprise grade software used across business today")))),r.a.createElement(p.a,{md:"3"},r.a.createElement("img",{className:"img-thumbnail border border-warning",src:"/software.jpg",alt:"feature 2"}))),r.a.createElement(g.a,{className:"my-5"},r.a.createElement(p.a,{md:"3"},r.a.createElement("img",{className:"img-thumbnail border border-warning",src:"/mobile.jpg",alt:"feature 3"})),r.a.createElement(p.a,{md:"9"},r.a.createElement(b.a,{body:!0,inverse:!0,className:"bg-transparent border border-dark"},r.a.createElement(f.a,null,r.a.createElement(w.a,null,r.a.createElement("h3",{className:"text-warning"},"Mobile Support")),r.a.createElement(k.a,null,"Out of the office? Need extra help? We can support all mobile & connectivity related matters")))))))},x=t(14),N=t.n(x),S=t(22),j=t(26),O=t(18),C=t(19),T=t(21),B=t(20),P=t(71),I=t(72),U=t(73),D=t(74),z=t(80),W=function(e){return r.a.createElement(z.a,{color:e.msg.type},e.msg.message)},L=function(e){Object(T.a)(t,e);var a=Object(B.a)(t);function t(e){var n;return Object(O.a)(this,t),(n=a.call(this)).state={msgBanner:{message:"",show:!1,type:""},redirect:!1},n}return Object(C.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(j.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(S.a)(N.a.mark((function e(a){var t,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),!this.state.username||!this.state.password){e.next=21;break}return e.prev=2,e.next=5,fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.state.username,password:this.state.password})});case 5:if((t=e.sent).ok){e.next=8;break}throw Error(t.statusText);case 8:return e.next=10,t.json();case 10:n=e.sent,sessionStorage.setItem("token",n.token),sessionStorage.setItem("role",n.role),this.setState({redirect:!0}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),this.setState({msgBanner:{message:"Unauthorised. Please try again",show:!0,type:"warning"}});case 19:e.next=22;break;case 21:this.setState({msgBanner:{message:"Please ensure all fields are completed",show:!0,type:"warning"}});case 22:case"end":return e.stop()}}),e,this,[[2,16]])})));return function(a){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.redirect?r.a.createElement(m.a,{to:"/dashboard"}):r.a.createElement("div",{className:"bg-login"},r.a.createElement(i.a,null,r.a.createElement(g.a,null,r.a.createElement("h1",{className:"mt-3 mx-auto text-warning"},"Login")),r.a.createElement(g.a,{className:"pt-2"},r.a.createElement(p.a,{sm:"12",md:{size:6,offset:3}},this.state.msgBanner.show?r.a.createElement(W,{msg:this.state.msgBanner}):"")),r.a.createElement(g.a,{className:"p-5"},r.a.createElement(p.a,{sm:"12",md:{size:6,offset:3}},r.a.createElement(b.a,{className:"bg-transparent border border-none"},r.a.createElement(f.a,null,r.a.createElement(w.a,null,r.a.createElement(P.a,{onSubmit:this.handleSubmit.bind(this)},r.a.createElement(I.a,null,r.a.createElement(U.a,{className:"text-white"},"Username"),r.a.createElement(D.a,{type:"username",name:"username",onChange:this.handleChange.bind(this)})),r.a.createElement(I.a,null,r.a.createElement(U.a,{className:"text-white"},"Password"),r.a.createElement(D.a,{type:"password",name:"password",onChange:this.handleChange.bind(this)})),r.a.createElement(h.a,{color:"warning"},"Submit"))))))),r.a.createElement(g.a,null,r.a.createElement(p.a,{sm:"12",md:{size:10,offset:1}},r.a.createElement(g.a,null,r.a.createElement("h3",{className:"my-3 mx-auto text-warning"},"Example Login Details")),r.a.createElement(g.a,null,r.a.createElement(p.a,{md:"4"},r.a.createElement(b.a,{body:!0,inverse:!0,color:"dark"},r.a.createElement(f.a,null,r.a.createElement(w.a,null,r.a.createElement("h5",{className:"text-warning"},"User 1")),r.a.createElement("p",null,r.a.createElement("strong",null,"U: "),"user1"),r.a.createElement("p",null,r.a.createElement("strong",null,"P: "),"user")))),r.a.createElement(p.a,{md:"4"},r.a.createElement(b.a,{body:!0,inverse:!0,color:"dark"},r.a.createElement(f.a,null,r.a.createElement(w.a,null,r.a.createElement("h5",{className:"text-warning"},"User 2")),r.a.createElement("p",null,r.a.createElement("strong",null,"U: "),"user2"),r.a.createElement("p",null,r.a.createElement("strong",null,"P: "),"user")))),r.a.createElement(p.a,{md:"4"},r.a.createElement(b.a,{body:!0,inverse:!0,color:"dark"},r.a.createElement(f.a,null,r.a.createElement(w.a,null,r.a.createElement("h5",{className:"text-warning"},"Engineer")),r.a.createElement("p",null,r.a.createElement("strong",null,"U: "),"engineer1"),r.a.createElement("p",null,r.a.createElement("strong",null,"P: "),"engineer")))))))))}}]),t}(n.Component);var M=function(){return r.a.createElement("div",{className:"bg-register"},r.a.createElement(i.a,null,r.a.createElement(g.a,null,r.a.createElement("h1",{className:"mt-3 mx-auto text-warning"},"Register")),r.a.createElement(g.a,{className:"p-5"},r.a.createElement(p.a,{sm:"12",md:{size:6,offset:3}},r.a.createElement(b.a,{className:"bg-transparent border border-none"},r.a.createElement(f.a,null,r.a.createElement(w.a,null,r.a.createElement(P.a,null,r.a.createElement(I.a,null,r.a.createElement(U.a,{className:"text-white"},"Username"),r.a.createElement(D.a,{type:"username",name:"username"})),r.a.createElement(I.a,null,r.a.createElement(U.a,{className:"text-white"},"Password"),r.a.createElement(D.a,{type:"password",name:"password"})),r.a.createElement(I.a,null,r.a.createElement(U.a,{className:"text-white"},"Role"),r.a.createElement(D.a,{type:"text",name:"role"})),r.a.createElement(h.a,{color:"warning"},"Submit"))))))),r.a.createElement(g.a,null,r.a.createElement(p.a,{sm:"12",md:{size:10,offset:1}},r.a.createElement(g.a,null,r.a.createElement("h3",{className:"my-3 mx-auto text-warning"},"Note")),r.a.createElement(g.a,null,r.a.createElement(p.a,{md:"12"},r.a.createElement(b.a,{body:!0,inverse:!0,color:"warning"},r.a.createElement(f.a,null,r.a.createElement(w.a,null,r.a.createElement("h5",{className:"text-light"},"Please note: This register form has been disabled."))))))))))},R=t(31),J=t(75),A=t(81),Y=t(76),H=t(77),Q=t(78),V=t(79),$=function(e){Object(T.a)(t,e);var a=Object(B.a)(t);function t(e){var n;return Object(O.a)(this,t),(n=a.call(this)).state={msgBanner:{message:"",show:!1},redirect:!1},n}return Object(C.a)(t,[{key:"logout",value:function(){sessionStorage.clear(),this.setState({redirect:!0})}},{key:"handleChange",value:function(e){this.setState(Object(j.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(S.a)(N.a.mark((function e(a){var t,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),!this.state.title||!this.state.description){e.next=18;break}return t=sessionStorage.getItem("token"),e.prev=3,e.next=6,fetch("/api/tickets?token=".concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:this.state.title,description:this.state.description})});case 6:if((n=e.sent).ok){e.next=9;break}throw Error(n.statusText);case 9:window.location.reload(!1),this.setState({msgBanner:{message:"Success. Ticket was created",show:!0,type:"warning"}}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),this.setState({msgBanner:{message:"Unauthorised. Please try again",show:!0,type:"warning"}});case 16:e.next=19;break;case 18:this.setState({msgBanner:{message:"Please ensure all fields are completed",show:!0,type:"warning"}});case 19:case"end":return e.stop()}}),e,this,[[3,13]])})));return function(a){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(S.a)(N.a.mark((function e(){var a,t,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=sessionStorage.getItem("token"),e.next=4,fetch("/api/tickets?token=".concat(a));case 4:if((t=e.sent).ok){e.next=7;break}throw Error(t.statusText);case 7:return e.next=9,t.json();case 9:n=e.sent,this.setState({data:n}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),this.setState({redirect:!0});case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"deleteTicket",value:function(){var e=Object(S.a)(N.a.mark((function e(a){var t,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=sessionStorage.getItem("token"),e.prev=1,e.next=4,fetch("/api/tickets/".concat(a,"?token=").concat(t),{method:"DELETE",headers:{"Content-Type":"application/json"}});case 4:if((n=e.sent).ok){e.next=7;break}throw Error(n.statusText);case 7:window.location.reload(!1),this.setState({msgBanner:{message:"Success. Ticket was deleted",show:!0,type:"warning"}}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),this.setState({msgBanner:{message:"Unauthorised. Please try again",show:!0,type:"warning"}});case 14:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;if(this.state.redirect)return r.a.createElement(m.a,{to:"/"});if(this.state.data){var a=this.state.data.data.map((function(a){return r.a.createElement(q,{key:a.id,data:a,handleDelete:e.deleteTicket.bind(e)})}));return r.a.createElement("div",{className:"bg-dashboard"},r.a.createElement(i.a,null,r.a.createElement(g.a,{className:"py-3"},r.a.createElement(p.a,{sm:"12",md:{size:6,offset:3}},this.state.msgBanner.show?r.a.createElement(W,{msg:this.state.msgBanner}):"")),r.a.createElement(g.a,null,r.a.createElement(p.a,{sm:"12",md:{size:10,offset:1}},r.a.createElement(g.a,null,r.a.createElement(p.a,{md:"8"},r.a.createElement(J.a,{dark:!0,responsive:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"2"},"Ticket"),r.a.createElement("th",null))),r.a.createElement("tbody",null,a))),r.a.createElement(p.a,{md:"4"},r.a.createElement(F,{change:this.handleChange.bind(this),submit:this.handleSubmit.bind(this)}),r.a.createElement(h.a,{block:!0,color:"secondary",onClick:this.logout.bind(this)},"Logout")))))))}return r.a.createElement("div",{className:"bg-dashboard"},r.a.createElement(i.a,null,"Loading..."))}}]),t}(n.Component),q=function(e){var a=Object(n.useState)(!1),t=Object(R.a)(a,2),l=t[0],s=t[1],c=function(){return s(!l)};return r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"2"},e.data.title),r.a.createElement("td",null,r.a.createElement(h.a,{color:"warning",onClick:c},"View")),r.a.createElement(A.a,{isOpen:l,toggle:c},r.a.createElement(Y.a,{toggle:c},e.data.title," ",e.data.urgent?r.a.createElement(H.a,{color:"warning"},"Urgent"):""),r.a.createElement(Q.a,null,e.data.description),r.a.createElement(V.a,null,r.a.createElement(h.a,{color:"danger",onClick:e.handleDelete.bind(void 0,e.data.id)},"Delete"),r.a.createElement(h.a,{color:"secondary",onClick:c},"Close"))))},F=function(e){var a=Object(n.useState)(!1),t=Object(R.a)(a,2),l=t[0],s=t[1],c=function(){return s(!l)};return r.a.createElement("div",null,r.a.createElement(h.a,{block:!0,color:"warning",onClick:c},"Add Ticket"),r.a.createElement(A.a,{isOpen:l,toggle:c},r.a.createElement(P.a,{onSubmit:e.submit},r.a.createElement(Y.a,{toggle:c},"Raise new ticket"),r.a.createElement(Q.a,null,r.a.createElement(I.a,null,r.a.createElement(U.a,{for:"exampleEmail"},"Title"),r.a.createElement(D.a,{type:"text",name:"title",onChange:e.change})),r.a.createElement(I.a,null,r.a.createElement(U.a,{for:"exampleEmail"},"Description"),r.a.createElement(D.a,{type:"textarea",name:"description",onChange:e.change})),r.a.createElement(I.a,null,r.a.createElement(U.a,{for:"exampleSelect"},"Urgent"),r.a.createElement(D.a,{type:"select",name:"urgent",onChange:e.change},r.a.createElement("option",{value:"0"},"No"),r.a.createElement("option",{value:"1"},"Yes")))),r.a.createElement(V.a,null,r.a.createElement(h.a,{color:"warning",type:"submit",onClick:c},"Submit"),r.a.createElement(h.a,{color:"secondary",onClick:c},"Cancel")))))},G=function(e){Object(T.a)(t,e);var a=Object(B.a)(t);function t(e){var n;return Object(O.a)(this,t),(n=a.call(this)).state={redirect:!1},n}return Object(C.a)(t,[{key:"componentWillMount",value:function(){sessionStorage.getItem("token")?this.setState({loggedIn:!0}):this.setState({msgBanner:{message:"You are not authorised. Please log in",show:!0,type:"warning"},loggedIn:!1})}},{key:"render",value:function(){return this.state.loggedIn?r.a.createElement($,null):r.a.createElement(m.a,{to:"/login"})}}]),t}(n.Component);var K=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(E,null),r.a.createElement(c.a,null,r.a.createElement(m.d,null,r.a.createElement(m.b,{exact:!0,path:"/"},r.a.createElement(y,null)),r.a.createElement(m.b,{path:"/login"},r.a.createElement(L,null)),r.a.createElement(m.b,{path:"/register"},r.a.createElement(M,null)),r.a.createElement(m.b,{path:"/dashboard"},r.a.createElement(G,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(K,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[39,1,2]]]);
//# sourceMappingURL=main.efe6d957.chunk.js.map